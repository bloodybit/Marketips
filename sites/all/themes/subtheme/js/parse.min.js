jQuery(function(e){function t(){bottom=e(window).height()+e(window).scrollTop(),height=e(document).height(),bottom>n&&!a&&(currentTime=new Date,scrollStart=currentTime.getTime(),timeToScroll=Math.round((scrollStart-d)/1e3),r?alert("started reading "+timeToScroll):(m.set({startReading:timeToScroll}),m.save(null,{success:function(e){Drupal.settings.parse.debug&&console.log("Object reading "+e.id+" read in "+timeToScroll)},error:function(e,t){Drupal.settings.parse.debug&&alert("Failed to create new object, with error code: "+t.message)}})),a=!0),bottom>=e("#block-system-main").scrollTop()+e("#block-system-main").innerHeight()&&!i&&(currentTime=new Date,contentScrollEnd=currentTime.getTime(),timeToContentEnd=Math.round((contentScrollEnd-scrollStart)/1e3),r?alert("end content section "+timeToContentEnd):(m.set({readArticle:timeToContentEnd}),m.save(null,{success:function(e){Drupal.settings.parse.debug&&console.log("Object bottom "+e.id+" read in "+timeToContentEnd)},error:function(e,t){Drupal.settings.parse.debug&&alert("Failed to create new object, with error code: "+t.message)}})),i=!0),bottom>=height&&!c&&(currentTime=new Date,end=currentTime.getTime(),u=Math.round((end-scrollStart)/1e3),r?alert("bottom of page "+u):(60>u?(m.set({type:"Scanner"}),m.save(null,{success:function(e){Drupal.settings.parse.debug&&console.log("Object bottom "+e.id+" type read Scanner")},error:function(e,t){Drupal.settings.parse.debug&&alert("Failed to create new object, with error code: "+t.message)}})):(m.set({type:"Reader"}),m.save(null,{success:function(e){Drupal.settings.parse.debug&&console.log("Object bottom "+e.id+" type read Reader")},error:function(e,t){Drupal.settings.parse.debug&&alert("Failed to create new object, with error code: "+t.message)}})),m.set({pageBottom:u}),m.save(null,{success:function(e){Drupal.settings.parse.debug&&console.log("Object bottom "+e.id+" read in "+u)},error:function(e,t){Drupal.settings.parse.debug&&alert("Failed to create new object, with error code: "+t.message)}})),c=!0)}var r=!1,o=100,n=250,s=0,a=!1,i=!1,c=!1,l=new Date,d=l.getTime(),u=0;document.title;if(r)alert("The page has loaded.");else{var g=Parse.Object.extend("Reading"),m=new g;m.set({pageLoaded:window.location.pathname}),m.set({user:Drupal.settings.parse.uid.toString()}),m.set({title:Drupal.settings.parse.title}),m.save(null,{success:function(e){Drupal.settings.parse.debug&&console.log("New Reading created with objectId: "+e.id)},error:function(e,t){Drupal.settings.parse.debug&&alert("Failed to create new object, with error code: "+t.message)}})}e(window).scroll(function(){s&&clearTimeout(s),s=setTimeout(t,o)})});
